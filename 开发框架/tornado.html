<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>tornado网站开发</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<h1 id="tornado">tornado网站开发</h1>
<h2 id="_1">安装</h2>
<p><code>sudo apt-get install python-tornado</code>  </p>
<h2 id="hello-world">hello world</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #447fcf; text-decoration: underline">tornado.ioloop</span>
<span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #447fcf; text-decoration: underline">tornado.web</span>

<span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">MainHandler</span><span style="color: #d0d0d0">(tornado.web.RequestHandler):</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">get</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.get_argument(</span><span style="color: #ed9d13">&#39;foo&#39;</span><span style="color: #d0d0d0">)</span>  <span style="color: #999999; font-style: italic">#get参数</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.get_body_argument(</span><span style="color: #ed9d13">&#39;foo&#39;</span><span style="color: #d0d0d0">)</span>  <span style="color: #999999; font-style: italic">#post参数</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.write(</span><span style="color: #ed9d13">&quot;Hello, world&quot;</span><span style="color: #d0d0d0">)</span>


<span style="color: #d0d0d0">application</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">tornado.web.Application(</span>
    <span style="color: #d0d0d0">[</span>
        <span style="color: #d0d0d0">(</span><span style="color: #ed9d13">r&quot;/&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">MainHandler),</span>
    <span style="color: #d0d0d0">],</span>
    <span style="color: #d0d0d0">static_path=</span><span style="color: #ed9d13">&#39;static&#39;</span>
<span style="color: #d0d0d0">)</span>

<span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">__name__</span> <span style="color: #d0d0d0">==</span> <span style="color: #ed9d13">&quot;__main__&quot;</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">application.listen(</span><span style="color: #3677a9">8888</span><span style="color: #d0d0d0">)</span>
    <span style="color: #d0d0d0">tornado.ioloop.IOLoop.instance().start()</span>
</pre></div>


<h2 id="_2">当前目录作为一个静态网站</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #447fcf; text-decoration: underline">tornado.web</span>

<span style="color: #d0d0d0">application</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">tornado.web.Application([</span>
    <span style="color: #d0d0d0">(</span><span style="color: #ed9d13">r&quot;/(.*)&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">tornado.web.StaticFileHandler,</span> <span style="color: #d0d0d0">{</span><span style="color: #ed9d13">&quot;path&quot;</span><span style="color: #d0d0d0">:</span> <span style="color: #ed9d13">&quot;.&quot;</span><span style="color: #d0d0d0">}),</span>
<span style="color: #d0d0d0">])</span>
<span style="color: #d0d0d0">application.listen(</span><span style="color: #3677a9">8076</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">tornado.ioloop.IOLoop.instance().start()</span>
</pre></div>


<h5 id="_3">请求属性</h5>
<ul>
<li>请求path：self.request.path</li>
<li>请求ip：</li>
</ul>
<h5 id="_4">显示日志</h5>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #447fcf; text-decoration: underline">tornado.log</span>
<span style="color: #d0d0d0">tornado.log.enable_pretty_logging()</span>
</pre></div>


<h4 id="_5">模板</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #24909d">self</span><span style="color: #d0d0d0">.render(</span><span style="color: #ed9d13">&#39;main.html&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">foo=foo)</span>
</pre></div>


<h4 id="_6">模板语法</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #cd2828; font-weight: bold">{{</span> <span style="color: #40ffff">foo</span> <span style="color: #cd2828; font-weight: bold">}}</span><span style="color: #d0d0d0"> //变量</span>
<span style="color: #cd2828; font-weight: bold">{%</span> <span style="color: #6ab825; font-weight: bold">raw</span> <span style="color: #40ffff">foo</span> <span style="color: #cd2828; font-weight: bold">%}</span><span style="color: #d0d0d0"> //变量不要转码</span>
</pre></div>


<h3 id="_7">异步请求处理</h3>
<ul>
<li>@tornado.web.asynchronous装饰器</li>
<li>ThreadPoolExecutor</li>
<li>AsyncHTTPClient</li>
</ul>
<h3 id="_8">参考资料</h3>
<ul>
<li><a href="http://sebug.net/paper/books/tornado/">Tornado概览</a></li>
<li><a href="http://www.cnblogs.com/yiwenshengmei/archive/2011/06/08/understanding_tornado.html">深入理解Tornado——一个异步web服务器</a></li>
<li><a href="http://programmingzen.com/2009/09/13/benchmarking-tornado-vs-twisted-web-vs-tornado-on-twisted/">Benchmarking Tornado vs. Twisted Web vs. Tornado on Twisted </a></li>
<li><a href="http://blog.csdn.net/chenggong2dm/article/details/23344389">对比Tornado和Twisted</a></li>
</ul>
<p><img src="data:image/png;base64," /></p>
</body>
</html>
