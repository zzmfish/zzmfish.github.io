<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Maven</title>
    <link rel="stylesheet" href="../style.css" />
</head>
<body>
<h1 id="maven">Maven</h1>
<h2 id="_1">安装</h2>
<ul>
<li>下载解压，设置PATH</li>
<li>定义本地库位置
修改conf/settings.xml加一行：</li>
</ul>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">&lt;localRepository&gt;</span>D:/repo/repository<span style="color: #6ab825; font-weight: bold">&lt;/localRepository&gt;</span> 
</pre></div>


<h2 id="_2">创建项目</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%">mvn archetype:generate <span style="color: #ed9d13">\</span>
    -DgroupId<span style="color: #d0d0d0">=</span>com.mycompany.helloworld <span style="color: #ed9d13">\</span>
    -DartifactId<span style="color: #d0d0d0">=</span>helloworld <span style="color: #ed9d13">\</span>
    -Dpackage<span style="color: #d0d0d0">=</span>com.mycompany.helloworld <span style="color: #ed9d13">\</span>
    -Dversion<span style="color: #d0d0d0">=</span>1.0-SNAPSHOT
</pre></div>


<h2 id="_3">目录结构</h2>
<table>
<thead>
<tr>
<th>文件</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>pom.xml</td>
<td>描述项目，配置插件和管理依赖关系</td>
</tr>
<tr>
<td>src</td>
<td></td>
</tr>
<tr>
<td>test</td>
<td></td>
</tr>
<tr>
<td>target/xxx.jar</td>
<td></td>
</tr>
<tr>
<td>target/classes/</td>
<td></td>
</tr>
<tr>
<td>target/test-classes/</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="_4">构建项目</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">#编译</span>
mvn compile

<span style="color: #999999; font-style: italic">#打包</span>
mvn package
</pre></div>


<h2 id="_5">概念</h2>
<h3 id="pomproject-object-model">POM（Project Object Model）</h3>
<ul>
<li>项目所有的配置都放置在 POM 文件中</li>
</ul>
<h3 id="maven_1">Maven插件</h3>
<ul>
<li>一个<strong><em>目标</em></strong>是一个工作单元</li>
<li><strong><em>插件</em></strong>是一个或者多个目标的集合</li>
</ul>
<h3 id="maven_2">Maven生命周期</h3>
<ul>
<li><strong><em>生命周期</em></strong>指项目的构建过程，它包含了一系列的有序的<strong><em>阶段</em></strong></li>
<li>插件目标可以绑定到生命周期阶段上</li>
</ul>
<h5 id="_6">默认生命周期</h5>
<table>
<thead>
<tr>
<th>阶段</th>
<th>目标</th>
</tr>
</thead>
<tbody>
<tr>
<td>process-resources</td>
<td>resources:resources</td>
</tr>
<tr>
<td>compile</td>
<td>compiler:compile</td>
</tr>
<tr>
<td>process-classes</td>
<td>默认无目标</td>
</tr>
<tr>
<td>process-test-resources</td>
<td>resources:testResources</td>
</tr>
<tr>
<td>test-compile</td>
<td>compiler:testCompile</td>
</tr>
<tr>
<td>test</td>
<td>surefire:test</td>
</tr>
<tr>
<td>prepare-package</td>
<td>默认无目标</td>
</tr>
<tr>
<td>package</td>
<td>jar:jar</td>
</tr>
</tbody>
</table>
<h3 id="maven_3">Maven 依赖管理</h3>
<ul>
<li>依赖关系是在POM的<code>dependencies</code>部分中定义</li>
<li><strong><em>传递依赖</em></strong>是指把被依赖jar文件的依赖关系纳入最终解决的依赖关系链中</li>
<li><strong><em>scope</em></strong>决定依赖关系的适用范围</li>
</ul>
<h3 id="maven_4">Maven库</h3>
<ul>
<li>maven<strong><em>远程库</em></strong>有maven的核心插件和可供下载的jar文件</li>
<li><strong><em>本地库</em></strong>是指 maven 下载了插件或者 jar 文件后存放在本地机器上的拷贝</li>
<li>通过<code>mvn install</code>命令把项目安装到本地库</li>
<li>其他项目可以通过maven坐标和本地库的项目建立依赖关系</li>
<li><a href="http://mvnrepository.com">MVN Repository</a></li>
</ul>
<h2 id="_7">参考</h2>
<ul>
<li><a href="https://maven.apache.org/guides/getting-started/">Maven Getting Started Guide</a></li>
<li><a href="https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html">Maven in 5 Minutes</a></li>
<li><a href="http://www.cloudera.com/content/cloudera/en/documentation/core/latest/topics/cdh_vd_cdh5_maven_repo.html">Using the CDH 5 Maven Repository</a></li>
</ul>
</body>
</html>
