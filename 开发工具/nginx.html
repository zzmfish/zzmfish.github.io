<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>!bash</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%">nginx
nginx -s quit
</pre></div>


<h2 id="_1">静态目录</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">{</span>
        <span style="color: #d0d0d0">listen</span>   <span style="color: #3677a9">80</span><span style="color: #d0d0d0">;</span>
        <span style="color: #d0d0d0">root</span>   <span style="color: #d0d0d0">/path/to/root;</span>
        <span style="color: #d0d0d0">location</span> <span style="color: #d0d0d0">/</span> <span style="color: #d0d0d0">{</span>
                <span style="color: #d0d0d0">index</span>  <span style="color: #d0d0d0">index.php</span> <span style="color: #d0d0d0">index.html</span> <span style="color: #d0d0d0">index.htm;</span>
        <span style="color: #d0d0d0">}</span>
        <span style="color: #d0d0d0">location</span> <span style="color: #d0d0d0">/somedir</span> <span style="color: #d0d0d0">{</span>
               <span style="color: #d0d0d0">autoindex</span> <span style="color: #d0d0d0">on;</span>       <span style="color: #999999; font-style: italic">//显示文件列表</span>
        <span style="color: #d0d0d0">}</span>
<span style="color: #d0d0d0">}</span>
</pre></div>


<h2 id="_2">负载均衡</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">http</span> <span style="color: #d0d0d0">{</span>
    <span style="color: #d0d0d0">upstream</span> <span style="color: #d0d0d0">search_server</span> <span style="color: #d0d0d0">{</span>
        <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">aliyun-hk-data04:</span><span style="color: #3677a9">8367</span><span style="color: #d0d0d0">;</span>
        <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">aliyun-hk-data07:</span><span style="color: #3677a9">8367</span><span style="color: #d0d0d0">;</span>
        <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">aliyun-hk-data08:</span><span style="color: #3677a9">8367</span><span style="color: #d0d0d0">;</span>
        <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">aliyun-hk-data09:</span><span style="color: #3677a9">8367</span><span style="color: #d0d0d0">;</span>
        <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">aliyun-hk-data16:</span><span style="color: #3677a9">8367</span><span style="color: #d0d0d0">;</span>
        <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">aliyun-hk-data17:</span><span style="color: #3677a9">8367</span><span style="color: #d0d0d0">;</span>
        <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">aliyun-hk-data29:</span><span style="color: #3677a9">8367</span><span style="color: #d0d0d0">;</span>
    <span style="color: #d0d0d0">}</span>

    <span style="color: #d0d0d0">server</span> <span style="color: #d0d0d0">{</span>
        <span style="color: #d0d0d0">listen</span> <span style="color: #3677a9">8081</span><span style="color: #d0d0d0">;</span>

        <span style="color: #d0d0d0">location</span> <span style="color: #d0d0d0">/</span> <span style="color: #d0d0d0">{</span>
            <span style="color: #d0d0d0">proxy_pass</span> <span style="color: #d0d0d0">http:</span><span style="color: #999999; font-style: italic">//search_server;</span>
        <span style="color: #d0d0d0">}</span>
    <span style="color: #d0d0d0">}</span>
<span style="color: #d0d0d0">}</span>
</pre></div>


<h2 id="_3">参考</h2>
<ul>
<li><a href="http://serverfault.com/questions/536576/nginx-how-do-i-forward-a-http-request-to-another-port">Nginx: How do I forward a http request to another port?</a></li>
<li><a href="http://nginx.org/en/docs/http/load_balancing.html">Using nginx as HTTP load balancer</a></li>
</ul>
</body>
</html>
