<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="style.css" />
    <title>Linux经验技巧</title>
</head>
<body>
<h1 id="linux">Linux经验技巧</h1>
<h2 id="_1">系统监控</h2>
<p>查看监听端口：<code>netstat -lnp --inet</code><br />
统计系统调用的耗时：<code>strace -c -p 程序PID</code><br />
分析进程IO：<code>iotop</code><br />
查看线程的CPU占用：<code>top -H -p &lt;进程pid&gt;</code>  </p>
<h2 id="_2">系统管理</h2>
<p>增加最大文件数<br />
1. 编辑<code>/etc/security/limits.conf</code>：<br />
<code>zhouzm          hard nofile     10240</code><br />
2. 重启，执行命令：<code>ulimit -n 10240</code><br />
用户管理：<code>useradd 用户名</code><br />
设置时间: <code>date -s "20:16"</code>  </p>
<h2 id="ssh">SSH</h2>
<p>ssh挂载：<code>sshfs -p &lt;端口&gt; &lt;用户名&gt;@&lt;目标主机&gt;:&lt;远程目录&gt; &lt;本地目录&gt;</code>  </p>
<h3 id="ssh_1">ssh无密码登录</h3>
<ol>
<li>本机执行<code>ssh-keygen -t rsa</code>  </li>
<li>把<code>~/.ssh/id_rsa.pub</code>的内容添加到目标主机<code>~/.ssh/authorized_keys</code>  </li>
<li>设置目标主文件权限： <code>chmod 700 ~/.ssh &amp;&amp; chmod 600 ~/.ssh/authorized_keys</code></li>
</ol>
<h2 id="_3">文件管理</h2>
<p>查找24小时内修改过的文件: <code>find -mtime 0</code><br />
查找断开的符号链接： <code>find . -type l -! -exec test -e {} \; -print</code><br />
解压并更改目录名称：<code>mkdir &lt;目录&gt; &amp;&amp; tar zxf hello.tgz -C &lt;目录&gt; --strip-components 1</code> </p>
<h2 id="_4">其他</h2>
<p>重新连接screen会话，必要时先detach：</p>
<pre><code>kill -HUP &lt;screen pid&gt;
screen -d -r
</code></pre>

<p>bash下编辑命令：输完命令后按<code>Ctrl</code>-<code>x</code> <code>Ctrl</code>-<code>e</code><br />
脚本退出杀掉所有子进程：<code>trap "kill 0" SIGINT SIGTERM EXIT</code><br />
上传文件：<code>rz</code><br />
下载文件：<code>sz &lt;文件名&gt;</code><br />
小写转大写：<code>tr '[a-z]' '[A-Z]'</code>  </p>
</body>
</html>

