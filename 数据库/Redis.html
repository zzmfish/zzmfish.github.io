<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>特性</title>
    <link rel="stylesheet" href="../style.css" />
</head>
<body>
<h2 id="_1">特性</h2>
<ul>
<li>k/v类型</li>
<li>list，set，hash等数据类型</li>
<li>单线程的IO复用模型</li>
<li>SWAP：只交换value<ul>
<li>Blocking VM</li>
<li>Threaded VM</li>
</ul>
</li>
<li>使用现场申请内存的方式来存储数据，并且很少使用free-list等方式来优化内存分配，会在一定程度上存在内存碎片</li>
<li>临时数据：带过期时间的数据</li>
<li>菲林是数据：永远不会被剔除</li>
</ul>
<h3 id="_2">数据类型</h3>
<h4 id="_3">列表</h4>
<ul>
<li>插入元素：LPUSH、RPUSH</li>
<li>获取元素：BLPOP</li>
<li>获取范围：LRANGE</li>
<li>限制长度：LTRIM</li>
<li>最多2^32 - 1个元素</li>
<li>访问两端元素很快</li>
<li>访问中间元素很慢</li>
</ul>
<h4 id="_4">集合</h4>
<h4 id="_5">哈希</h4>
<h4 id="_6">有序集合</h4>
<h3 id="_7">虚拟内存</h3>
<ul>
<li>不赞成使用</li>
</ul>
<h3 id="_8">数据持久化</h3>
<h4 id="rdb">RDB</h4>
<ul>
<li>定时快照</li>
<li>单文件</li>
<li>fork</li>
</ul>
<h4 id="aof">AOF</h4>
<ul>
<li>记录每个操作</li>
<li>fsync：无/每秒/每操作</li>
<li>后台线程</li>
<li>追加文件，容错</li>
<li>自动压缩</li>
<li>容易解析的格式</li>
</ul>
<h3 id="_9">主从复制</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #cd2828; font-weight: bold">#配置从服务器</span>
<span style="color: #d0d0d0">slaveof</span> <span style="color: #3677a9">192.168.1.1</span> <span style="color: #3677a9">6379</span>
</pre></div>


<h2 id="_10">使用方法</h2>
<h4 id="_11">下载</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">wget</span> <span style="color: #d0d0d0">http:</span><span style="color: #999999; font-style: italic">//download.redis.io/releases/redis-2.8.19.tar.gz</span>
</pre></div>


<h4 id="_12">编译</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">make</span>
</pre></div>


<h4 id="_13">运行</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">./src/redis-server</span>
<span style="color: #d0d0d0">./src/redis-server</span> <span style="color: #d0d0d0">--port</span> <span style="color: #3677a9">6379</span>
<span style="color: #d0d0d0">./src/redis-server</span> <span style="color: #d0d0d0">redis.conf</span> <span style="color: #d0d0d0">--port</span> <span style="color: #3677a9">6379</span>
</pre></div>


<h4 id="key">删除一定模式的key</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%">redis-cli keys beh_sim_* | xargs redis-cli del
</pre></div>


<p>默认端口6379</p>
<h4 id="_14">性能测试：</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">./redis-benchmark</span> <span style="color: #d0d0d0">-q</span> <span style="color: #d0d0d0">-n</span> <span style="color: #3677a9">100000</span>
</pre></div>


<h4 id="_15">命令</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>scan 0 count 10</td>
<td>显示0-10个key</td>
</tr>
<tr>
<td>info keyspace</td>
<td>显示key的数量</td>
</tr>
<tr>
<td>flushdb</td>
<td>清空数据库</td>
</tr>
<tr>
<td>keys *</td>
<td>显示全部key</td>
</tr>
</tbody>
</table>
<h4 id="python">python接口</h4>
<ul>
<li>https://pypi.python.org/pypi/redis/</li>
</ul>
<h2 id="_16">资料</h2>
<ul>
<li><a href="http://redis.io/topics/quickstart">Redis Quick Start</a></li>
<li><a href="http://redis.io/topics/benchmarks">How fast is Redis?</a></li>
<li><a href="http://redis.io/topics/data-types">Data types</a></li>
<li><a href="http://www.infoq.com/cn/articles/tq-why-choose-redis">为什么使用 Redis及其产品定位</a></li>
<li><a href="http://www.infoq.com/cn/articles/tq-redis-memory-usage-optimization-storage">Redis内存使用优化与存储</a></li>
<li><a href="http://redis.readthedocs.org/en/latest/topic/persistence.html">持久化（persistence）</a></li>
</ul>
</body>
</html>
