<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Python经验技巧</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<h1 id="python">Python经验技巧</h1>
<h2 id="_1">未分类</h2>
<p>最大整数：<code>sys.maxint</code><br />
输出成json：<code>json.dumps(s)</code>  </p>
<h2 id="_2">常用函数</h2>
<p>匹配开头：<code>re.match(pattern, string)</code><br />
匹配任意位置：<code>re.search(pattern, string)</code><br />
匹配全部：<code>re.findall(pattern, string)</code><br />
指定文件编码：<code>f = codecs.open('out.txt', mode="w", encoding="utf-8")</code><br />
url编码：<code>urllib.quote(str)</code><br />
url解码：<code>urllib.unquote(str)</code><br />
深度拷贝：<code>obj2 = copy.deepcopy(obj1)</code>  </p>
<h2 id="_3">列表</h2>
<p>列表推导式：<code>squares = [x**2 for x in range(10)]</code><br />
排序：<code>list.sort()</code><br />
删除给定索引的元素：<code>del list[i]</code><br />
删除给定值的元素：<code>list.remove(v)</code>  </p>
<h2 id="_4">预定义变量</h2>
<p><code>__builtins__</code>：全局的内置符号，可以添加删除项<br />
<code>__file__</code>：py文件全路径  </p>
<h2 id="_5">第三方库</h2>
<p>网络爬虫：<code>Scrapy</code><br />
网站开发：<code>tornado</code>  </p>
<h2 id="_6">调试分析</h2>
<h3 id="gc">gc</h3>
<p>得到引用列表：<code>gc.get_referrers(obj)</code></p>
<h3 id="objgraph">objgraph</h3>
<p>显示引用关系图：</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">import objgraph
browsers <span style="color: #666666">=</span> objgraph.by_type(<span style="border: 1px solid #FF0000">&#39;</span>user_browser<span style="border: 1px solid #FF0000">&#39;</span>)
objgraph.show_backrefs(browsers[<span style="color: #666666">0</span>], max_depth<span style="color: #666666">=10</span>, filename<span style="color: #666666">=</span><span style="color: #BA2121">&quot;browser.dot&quot;</span>)
</pre></div>


<p>显示数量最多的类型：<code>objgraph.show_most_common_types(20)</code></p>
<h3 id="line95profiler">line_profiler</h3>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">kernprof.py <span style="color: #666666">-</span>l <span style="color: #666666">-</span>v <span style="color: #666666">&lt;</span>python<span style="border: 1px solid #FF0000">脚本和参数</span><span style="color: #666666">&gt;</span> 
</pre></div>


<h3 id="pdb">pdb</h3>
<p>断点：<code>pdb.set_trace()</code></p>
<h3 id="traceback">traceback</h3>
<p>显示堆栈：<code>traceback.print_stack()</code></p>
<h2 id="_7">模块安装</h2>
<h3 id="homelocal">编译安装到$HOME/local</h3>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">export PYTHONPATH<span style="color: #666666">=</span><span style="border: 1px solid #FF0000">$</span>HOME<span style="color: #666666">/</span>local<span style="color: #666666">/</span>lib<span style="color: #666666">/</span>python2<span style="color: #666666">.7/</span>site<span style="color: #666666">-</span>packages<span style="color: #666666">:</span><span style="border: 1px solid #FF0000">$</span>PYTHONPATH
python setup.py build
python setup.py install <span style="color: #666666">--</span>prefix<span style="color: #666666">=</span><span style="border: 1px solid #FF0000">$</span>HOME<span style="color: #666666">/</span>local
</pre></div>


<h3 id="pip">pip安装库</h3>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">sudo apt<span style="color: #666666">-</span>get install python<span style="color: #666666">-</span>pip
sudo pip install <span style="color: #666666">&lt;</span><span style="border: 1px solid #FF0000">库名</span><span style="color: #666666">&gt;</span>
</pre></div>
</body>
</html>

