<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Bash</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<h1 id="bash">Bash</h1>
<h2 id="_1">参数</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #40ffff">$*</span>             <span style="color: #999999; font-style: italic">#&quot;$1 $2 ...&quot;  </span>
<span style="color: #40ffff">$@</span>             <span style="color: #999999; font-style: italic">#&quot;$1&quot; &quot;$2&quot; &quot;$3&quot;  </span>
<span style="color: #40ffff">$# </span>            <span style="color: #999999; font-style: italic">#参数个数  </span>
<span style="color: #24909d">shift</span> <span style="color: #d0d0d0">[</span>n<span style="color: #d0d0d0">]</span>      <span style="color: #999999; font-style: italic">#弹出前面n个参数，n默认为1</span>
</pre></div>


<h2 id="_2">内置变量</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #40ffff">$?</span>                  <span style="color: #999999; font-style: italic">#上一个程序的退出代码  </span>
<span style="color: #ed9d13">${</span><span style="color: #40ffff">BASH_SOURCE</span><span style="color: #d0d0d0">[0]</span><span style="color: #ed9d13">}</span>   <span style="color: #999999; font-style: italic">#脚本文件路径</span>
</pre></div>


<h2 id="_3">语法</h2>
<p>case语法：</p>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">case</span> expression in
    pattern1 <span style="color: #d0d0d0">)</span>
        statements <span style="color: #d0d0d0">;;</span>
    pattern2 <span style="color: #d0d0d0">)</span>
        statements <span style="color: #d0d0d0">;;</span>
    * <span style="color: #d0d0d0">)</span>
        statements <span style="color: #d0d0d0">;;</span>
<span style="color: #6ab825; font-weight: bold">esac</span>
</pre></div>


<h2 id="_4">数据类型</h2>
<h3 id="_5">数组</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #40ffff">foo</span><span style="color: #d0d0d0">=()</span>                          <span style="color: #999999; font-style: italic">#定义数组  </span>
foo+<span style="color: #d0d0d0">=(</span>1<span style="color: #d0d0d0">)</span>                        <span style="color: #999999; font-style: italic">#添加元素    </span>
<span style="color: #24909d">echo</span> <span style="color: #ed9d13">${</span><span style="color: #40ffff">foo</span><span style="color: #d0d0d0">[*]</span><span style="color: #ed9d13">}</span>                  <span style="color: #999999; font-style: italic">#所有元素    </span>
<span style="color: #24909d">echo</span> <span style="color: #ed9d13">${#</span><span style="color: #40ffff">foo</span><span style="color: #d0d0d0">[*]</span><span style="color: #ed9d13">}</span>                 <span style="color: #999999; font-style: italic">#元素个数  </span>
<span style="color: #40ffff">jars</span><span style="color: #d0d0d0">=(</span>lib/*.jar<span style="color: #d0d0d0">)</span>                <span style="color: #999999; font-style: italic">#文件列表作为数组</span>
<span style="color: #d0d0d0">(</span><span style="color: #40ffff">IFS</span><span style="color: #d0d0d0">=</span>,<span style="color: #d0d0d0">;</span> <span style="color: #24909d">echo</span> <span style="color: #ed9d13">&quot;${</span><span style="color: #40ffff">array</span><span style="color: #d0d0d0">[*]</span><span style="color: #ed9d13">}&quot;</span><span style="color: #d0d0d0">)</span>     <span style="color: #999999; font-style: italic">#逗号连接数组内容  </span>
</pre></div>


<h2 id="_6">序列</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #24909d">echo</span> <span style="color: #d0d0d0">{</span>1..5<span style="color: #d0d0d0">}</span>  
<span style="color: #24909d">echo</span> <span style="color: #ed9d13">`</span>seq <span style="color: #3677a9">1</span> 5<span style="color: #ed9d13">`</span>
</pre></div>


<h2 id="_7">文本</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">#多行输入</span>
cat&gt;test1<span style="color: #ed9d13">&lt;&lt;EOF</span>
<span style="color: #ed9d13">hello</span>
<span style="color: #ed9d13">EOF</span>

<span style="color: #999999; font-style: italic">#文件按行处理</span>
cat <span style="color: #40ffff">$inputFile</span> <span style="color: #d0d0d0">|</span> <span style="color: #6ab825; font-weight: bold">while</span> <span style="color: #24909d">read </span>line<span style="color: #d0d0d0">;</span> <span style="color: #6ab825; font-weight: bold">do</span>
    <span style="color: #24909d">echo</span> <span style="color: #ed9d13">&quot;</span><span style="color: #40ffff">$line</span><span style="color: #ed9d13">&quot;</span>
<span style="color: #6ab825; font-weight: bold">done</span> &gt; <span style="color: #40ffff">$outputFile</span>

<span style="color: #999999; font-style: italic">#显示高亮</span>
<span style="color: #24909d">echo</span> -e <span style="color: #ed9d13">&quot;\033[1mhello\033[0m&quot;</span>

<span style="color: #999999; font-style: italic">#字符串匹配</span>
<span style="color: #d0d0d0">[[</span> <span style="color: #40ffff">abb</span> <span style="color: #d0d0d0">==</span> a* <span style="color: #d0d0d0">]]</span>
<span style="color: #d0d0d0">[[</span> <span style="color: #40ffff">123</span> <span style="color: #d0d0d0">=</span>~ ^<span style="color: #d0d0d0">[</span>0-9<span style="color: #d0d0d0">]</span>+<span style="color: #40ffff">$ </span><span style="color: #d0d0d0">]]</span>

<span style="color: #999999; font-style: italic">#字符串替换</span>
<span style="color: #ed9d13">${</span><span style="color: #40ffff">string</span><span style="color: #d0d0d0">//substring/replacement</span><span style="color: #ed9d13">}</span>

<span style="color: #999999; font-style: italic">#字符替换</span>
<span style="color: #40ffff">java_file</span><span style="color: #d0d0d0">=</span>app/<span style="color: #6ab825; font-weight: bold">$(</span><span style="color: #24909d">echo</span> <span style="color: #40ffff">$class_name</span> <span style="color: #d0d0d0">|</span> tr <span style="color: #ed9d13">&quot;.&quot;</span> <span style="color: #ed9d13">&quot;/&quot;</span><span style="color: #6ab825; font-weight: bold">)</span>.java
</pre></div>


<h2 id="_8">进程</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">#退出时杀死进程组</span>
<span style="color: #24909d">trap</span> <span style="color: #ed9d13">&quot;kill 0&quot;</span> SIGINT SIGTERM EXIT

<span style="color: #999999; font-style: italic">#执行另一个程序替换bash</span>
<span style="color: #24909d">exec</span> <span style="color: #40ffff">$Program</span> <span style="color: #40ffff">$Arguments</span>
</pre></div>


<h2 id="_9">其他</h2>
<p><strong><em>.</em></strong>是<strong><em>true</em></strong>的别名</p>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">#让函数可被子进程继承</span>
<span style="color: #24909d">declare</span> -x -f <span style="color: #40ffff">$FunctionName</span>

<span style="color: #999999; font-style: italic">#检测函数是否存在</span>
<span style="color: #24909d">declare</span> -F -f <span style="color: #40ffff">$FunctionName</span>

<span style="color: #999999; font-style: italic">#计时</span>
<span style="color: #40ffff">t0</span><span style="color: #d0d0d0">=</span><span style="color: #6ab825; font-weight: bold">$(</span>date +%s<span style="color: #6ab825; font-weight: bold">)</span>
<span style="color: #40ffff">t</span><span style="color: #d0d0d0">=</span><span style="color: #6ab825; font-weight: bold">$(($(</span>date +%s<span style="color: #6ab825; font-weight: bold">)</span><span style="color: #d0d0d0">-</span><span style="color: #40ffff">$t0</span><span style="color: #6ab825; font-weight: bold">))</span>
</pre></div>


<h2 id="_10">参考资料</h2>
<ul>
<li><a href="http://www.cnblogs.com/chengmo/archive/2010/10/02/1841355.html">linux shell 字符串操作（长度，查找，替换）详解</a></li>
</ul>
</body>
</html>
