<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JavaScript常用例程</title>
    <link rel="stylesheet" href="/style.css" />
</head>
<body>
<h1 id="javascript">JavaScript常用例程</h1>
<h2 id="dom">DOM</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//删除节点</span>
<span style="color: #d0d0d0">node.removeChild(child);</span>
</pre></div>


<h3 id="_1">发送请求</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//异步POST请求</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">req</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">XMLHttpRequest();</span> 
<span style="color: #d0d0d0">req.onreadystatechange</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">function</span><span style="color: #d0d0d0">()</span> <span style="color: #d0d0d0">{</span>
    <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">(req.readyState</span> <span style="color: #d0d0d0">==</span> <span style="color: #3677a9">4</span><span style="color: #d0d0d0">)</span> <span style="color: #d0d0d0">{</span> <span style="color: #999999; font-style: italic">//loaded</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">(req.status</span> <span style="color: #d0d0d0">==</span> <span style="color: #3677a9">200</span><span style="color: #d0d0d0">)</span> <span style="color: #d0d0d0">{</span> <span style="color: #999999; font-style: italic">//ok</span>
            <span style="color: #d0d0d0">console.log(req.responseText);</span> <span style="color: #999999; font-style: italic">//应答内容</span>
        <span style="color: #d0d0d0">}</span>
    <span style="color: #d0d0d0">}</span>
<span style="color: #d0d0d0">}</span>       
<span style="color: #d0d0d0">req.open(</span><span style="color: #ed9d13">&quot;POST&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">url,</span> <span style="color: #6ab825; font-weight: bold">true</span><span style="color: #d0d0d0">);</span>
<span style="color: #d0d0d0">req.setRequestHeader(</span><span style="color: #ed9d13">&#39;Content-Type&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;application/x-www-form-urlencoded&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">req.send(data);</span>
</pre></div>


<h3 id="_2">日期和时间</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//UTC时间戳（ms）</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">timeStamp</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">Date</span><span style="color: #d0d0d0">.now();</span>

<span style="color: #999999; font-style: italic">//当地时间戳（ms）</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">nowDate</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #24909d">Date</span><span style="color: #d0d0d0">();</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">nowTime</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">nowDate.getTime()</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">nowDate.getTimezoneOffset()</span> <span style="color: #d0d0d0">*</span> <span style="color: #3677a9">60000</span><span style="color: #d0d0d0">;</span>

<span style="color: #999999; font-style: italic">//解析日期时间为unix时间戳（ms）</span>
<span style="color: #24909d">Date</span><span style="color: #d0d0d0">.parse(startTimeInput.value)</span> 
</pre></div>


<h3 id="_3">坐标</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//视窗滚动位置</span>
<span style="color: #24909d">window</span><span style="color: #d0d0d0">.scrollX;</span>
<span style="color: #24909d">window</span><span style="color: #d0d0d0">.scrollY;</span>

<span style="color: #999999; font-style: italic">//视窗大小</span>
<span style="color: #24909d">window</span><span style="color: #d0d0d0">.innerWidth;</span>
<span style="color: #24909d">window</span><span style="color: #d0d0d0">.innerHeight;</span>

<span style="color: #999999; font-style: italic">//元素相对视窗的位置</span>
<span style="color: #d0d0d0">elem.getBoundingClientRect()</span>
</pre></div>


<h3 id="_4">数据处理</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//解析JSON</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">obj</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">eval</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&#39;(&#39;</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">json</span> <span style="color: #d0d0d0">+</span> <span style="color: #ed9d13">&#39;)&#39;</span><span style="color: #d0d0d0">);</span>
<span style="color: #999999; font-style: italic">//生成JSON</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">json</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">JSON.stringify(obj);</span>

<span style="color: #999999; font-style: italic">//URL编码</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">data</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">encodeURIComponent</span><span style="color: #d0d0d0">(value);</span>
</pre></div>


<h3 id="_5">事件处理</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//DOMContentLoaded</span>
<span style="color: #d0d0d0">document.addEventListener(</span><span style="color: #ed9d13">&quot;DOMContentLoaded&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #6ab825; font-weight: bold">function</span><span style="color: #d0d0d0">(</span><span style="color: #6ab825; font-weight: bold">event</span><span style="color: #d0d0d0">)</span> <span style="color: #d0d0d0">{</span>
    <span style="color: #d0d0d0">alert(&#39;document</span> <span style="color: #d0d0d0">is</span> <span style="color: #d0d0d0">loaded!&#39;);</span>
<span style="color: #d0d0d0">});</span>
</pre></div>


<h4 id="_6">当前脚本路径</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">scripts</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">document</span><span style="color: #d0d0d0">.getElementsByTagName(</span><span style="color: #ed9d13">&quot;script&quot;</span><span style="color: #d0d0d0">),</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">src</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">scripts[scripts.length-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">].src;</span>
<span style="color: #999999; font-style: italic">//or</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">src</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">document</span><span style="color: #d0d0d0">.currentScript;</span>
</pre></div>


<h4 id="xpath">XPath</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">result</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">document</span><span style="color: #d0d0d0">.evaluate(</span><span style="color: #ed9d13">&#39;//input&#39;</span><span style="color: #d0d0d0">,</span>
    <span style="color: #24909d">document</span><span style="color: #d0d0d0">,</span>
    <span style="color: #6ab825; font-weight: bold">null</span><span style="color: #999999; font-style: italic">/*命名空间*/</span><span style="color: #d0d0d0">,</span>
    <span style="color: #d0d0d0">XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,</span>
    <span style="color: #6ab825; font-weight: bold">null</span><span style="color: #999999; font-style: italic">/*结果集，null为新建*/</span><span style="color: #d0d0d0">);</span>
</pre></div>


<h3 id="_7">未分类</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//在新窗口输出html</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">doc</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">window</span><span style="color: #d0d0d0">.open().</span><span style="color: #24909d">document</span><span style="color: #d0d0d0">;</span>
<span style="color: #d0d0d0">doc.open();</span>
<span style="color: #d0d0d0">doc.write(</span><span style="color: #ed9d13">&#39;hello&#39;</span><span style="color: #d0d0d0">);</span>
<span style="color: #d0d0d0">doc.close();</span>
</pre></div>


<h2 id="_8">第三方库</h2>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://jquery.com">jquery</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/carhartl/jquery-cookie">jquery-cookie</a></td>
<td></td>
</tr>
<tr>
<td><a href="http://getbootstrap.com/">Bootstrap</a></td>
<td>Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.</td>
</tr>
</tbody>
</table>
<h3 id="jquery">jQuery</h3>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//设置html</span>
<span style="color: #d0d0d0">$(</span><span style="color: #ed9d13">&#39;#myid&#39;</span><span style="color: #d0d0d0">).html(</span><span style="color: #ed9d13">&#39;hello&#39;</span><span style="color: #d0d0d0">);</span>
</pre></div>
</body>
</html>
