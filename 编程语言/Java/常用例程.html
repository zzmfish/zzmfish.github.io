<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>网络请求</title>
    <link rel="stylesheet" href="/style.css" />
</head>
<body>
<h6 id="_1">网络请求</h6>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">conn</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">(HttpURLConnection)</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">URL(url).</span><span style="color: #bbbbbb">openConnection</span><span style="color: #d0d0d0">();</span>
<span style="color: #d0d0d0">conn.</span><span style="color: #bbbbbb">setDoOutput</span><span style="color: #d0d0d0">(</span><span style="color: #6ab825; font-weight: bold">true</span><span style="color: #d0d0d0">);</span>
<span style="color: #d0d0d0">conn.</span><span style="color: #bbbbbb">setRequestMethod</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&quot;POST&quot;</span><span style="color: #d0d0d0">);</span>

<span style="color: #d0d0d0">OutputStream</span> <span style="color: #d0d0d0">output</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">conn.</span><span style="color: #bbbbbb">getOutputStream</span><span style="color: #d0d0d0">();</span>
<span style="color: #d0d0d0">output.</span><span style="color: #bbbbbb">write</span><span style="color: #d0d0d0">(msg.</span><span style="color: #bbbbbb">getBytes</span><span style="color: #d0d0d0">());</span>
<span style="color: #d0d0d0">output.</span><span style="color: #bbbbbb">flush</span><span style="color: #d0d0d0">();</span>
<span style="color: #d0d0d0">output.</span><span style="color: #bbbbbb">close</span><span style="color: #d0d0d0">();</span>

<span style="color: #6ab825; font-weight: bold">int</span> <span style="color: #d0d0d0">respCode</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">conn.</span><span style="color: #bbbbbb">getResponseCode</span><span style="color: #d0d0d0">();</span>
</pre></div>


<h5 id="_2">日期和时间</h5>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%">
</pre></div>


<h2 id="_3">技巧</h2>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">//backtrace</span>
<span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">(StackTraceElement</span> <span style="color: #d0d0d0">ste</span> <span style="color: #d0d0d0">:</span> <span style="color: #d0d0d0">Thread.</span><span style="color: #bbbbbb">currentThread</span><span style="color: #d0d0d0">().</span><span style="color: #bbbbbb">getStackTrace</span><span style="color: #d0d0d0">())</span> <span style="color: #d0d0d0">{</span>
    <span style="color: #d0d0d0">System.</span><span style="color: #bbbbbb">out</span><span style="color: #d0d0d0">.</span><span style="color: #bbbbbb">println</span><span style="color: #d0d0d0">(ste);</span>
<span style="color: #d0d0d0">}</span>

<span style="color: #999999; font-style: italic">//过滤字符</span>
<span style="color: #d0d0d0">String</span> <span style="color: #d0d0d0">str</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">StringUtils.</span><span style="color: #bbbbbb">strip</span><span style="color: #d0d0d0">(line,</span> <span style="color: #ed9d13">&quot;\r\n&quot;</span><span style="color: #d0d0d0">);</span>
</pre></div>
</body>
</html>
