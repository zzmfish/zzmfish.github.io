<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>运行程序并读取输出</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<h5 id="_1">运行程序并读取输出</h5>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">Process</span> <span style="color: #d0d0d0">proc</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Runtime.</span><span style="color: #bbbbbb">getRuntime</span><span style="color: #d0d0d0">().</span><span style="color: #bbbbbb">exec</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&quot;hostname&quot;</span><span style="color: #d0d0d0">);</span>
<span style="color: #d0d0d0">BufferedReader</span> <span style="color: #d0d0d0">stdInput</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">BufferedReader(</span><span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">InputStreamReader(proc.</span><span style="color: #bbbbbb">getInputStream</span><span style="color: #d0d0d0">()));</span>
<span style="color: #d0d0d0">String</span> <span style="color: #d0d0d0">line</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">stdInput.</span><span style="color: #bbbbbb">readLine</span><span style="color: #d0d0d0">();</span>
</pre></div>


<h5 id="inputstream">按行读取InputStream</h5>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">Scanner</span> <span style="color: #d0d0d0">scanner</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">Scanner(inputStream);</span>
<span style="color: #6ab825; font-weight: bold">while</span> <span style="color: #d0d0d0">(scanner.</span><span style="color: #bbbbbb">hasNext</span><span style="color: #d0d0d0">())</span> <span style="color: #d0d0d0">{</span>
    <span style="color: #d0d0d0">String</span> <span style="color: #d0d0d0">line</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">scanner.</span><span style="color: #bbbbbb">nextLine</span><span style="color: #d0d0d0">();</span>
    <span style="color: #d0d0d0">...</span>
<span style="color: #d0d0d0">}</span>
</pre></div>


<h5 id="inputstream_1">整个读取InputStream</h5>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">StringWriter</span> <span style="color: #d0d0d0">stringWriter</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">StringWriter();</span>
<span style="color: #d0d0d0">IOUtils.</span><span style="color: #bbbbbb">copy</span><span style="color: #d0d0d0">(inputStream,</span> <span style="color: #d0d0d0">stringWriter);</span>
<span style="color: #d0d0d0">String</span> <span style="color: #d0d0d0">data</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">stringWriter.</span><span style="color: #bbbbbb">toString</span><span style="color: #d0d0d0">();</span>
</pre></div>


<h5 id="_2">写入文件</h5>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">FileWriter</span> <span style="color: #d0d0d0">fileWriter</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">FileWriter(</span><span style="color: #ed9d13">&quot;log/server.log&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #6ab825; font-weight: bold">true</span><span style="color: #999999; font-style: italic">/*append*/</span><span style="color: #d0d0d0">);</span>
<span style="color: #d0d0d0">fileWriter.</span><span style="color: #bbbbbb">write</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&quot;content&quot;</span><span style="color: #d0d0d0">);</span>
<span style="color: #d0d0d0">fileWriter.</span><span style="color: #bbbbbb">flush</span><span style="color: #d0d0d0">();</span>
</pre></div>
</body>
</html>
