<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Python常用例程</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<h1 id="python">Python常用例程</h1>
<h4 id="_1">正则表达式</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">re.match(pattern,</span> <span style="color: #d0d0d0">string)</span>      <span style="color: #999999; font-style: italic">#匹配开头</span>
<span style="color: #d0d0d0">re.search(pattern,</span> <span style="color: #d0d0d0">string)</span>     <span style="color: #999999; font-style: italic">#匹配任意位置  </span>
<span style="color: #d0d0d0">re.findall(pattern,</span> <span style="color: #d0d0d0">string)</span>    <span style="color: #999999; font-style: italic">#匹配全部</span>
</pre></div>


<h4 id="_2">字符集</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">f</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">codecs.open(</span><span style="color: #ed9d13">&#39;out.txt&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">mode=</span><span style="color: #ed9d13">&quot;w&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">encoding=</span><span style="color: #ed9d13">&quot;utf-8&quot;</span><span style="color: #d0d0d0">)</span> <span style="color: #999999; font-style: italic">#以指定编码打开文件</span>
</pre></div>


<h4 id="_3">文件系统</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">os.makedirs(path)</span>    <span style="color: #999999; font-style: italic">#递归创建目录</span>
<span style="color: #d0d0d0">os.listdir(path)</span>     <span style="color: #999999; font-style: italic">#列出目录内容</span>
<span style="color: #d0d0d0">glob.glob(</span><span style="color: #ed9d13">&#39;*/*.gif&#39;</span><span style="color: #d0d0d0">)</span>     <span style="color: #999999; font-style: italic">#列出匹配的文件</span>
</pre></div>


<h4 id="_4">数据编码</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">json.dumps(s)</span>         <span style="color: #999999; font-style: italic">#输出json</span>
<span style="color: #d0d0d0">base64.b64encode(s)</span>   <span style="color: #999999; font-style: italic">#输出成base64</span>
<span style="color: #d0d0d0">urllib.quote(</span><span style="color: #24909d">str</span><span style="color: #d0d0d0">)</span>     <span style="color: #999999; font-style: italic">#url编码</span>
<span style="color: #d0d0d0">urllib.unquote(</span><span style="color: #24909d">str</span><span style="color: #d0d0d0">)</span>   <span style="color: #999999; font-style: italic">#url解码</span>
<span style="color: #d0d0d0">md5.md5(</span><span style="color: #24909d">str</span><span style="color: #d0d0d0">)</span>          <span style="color: #999999; font-style: italic">#md5</span>
</pre></div>


<h4 id="_5">参数解析</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">parser</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">argparse.ArgumentParser(description=</span><span style="color: #ed9d13">&#39;say_hello&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">parser.add_argument(</span><span style="color: #ed9d13">&#39;--say_hello&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">dest=</span><span style="color: #ed9d13">&quot;say_hello&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">action=</span><span style="color: #ed9d13">&#39;store_true&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">parser.add_argument(</span><span style="color: #ed9d13">&#39;--table&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">type</span><span style="color: #d0d0d0">=</span><span style="color: #24909d">str</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">default=</span><span style="color: #ed9d13">&#39;&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">args</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">parser.parse_args()</span>
</pre></div>


<h4 id="http">HTTP请求</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">req</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">urllib2.Request(url</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">url,</span> <span style="color: #d0d0d0">data</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">data)</span> <span style="color: #999999; font-style: italic">#data为空则是GET</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">urllib2.urlopen(req).read()</span>
</pre></div>


<h4 id="_6">通过管道调用进程</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">args</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[</span><span style="color: #ed9d13">&#39;java&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;-jar&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;plantuml.jar&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;-pipe&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;-tpng&#39;</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">pipe</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">subprocess.Popen(args,</span> <span style="color: #d0d0d0">stdin</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">subprocess.PIPE,</span> <span style="color: #d0d0d0">stdout</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">subprocess.PIPE)</span>
<span style="color: #d0d0d0">pipe.stdin.write(input_data)</span>
<span style="color: #d0d0d0">pipe.stdin.close()</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">pipe.stdout.read()</span>
</pre></div>


<h4 id="_7">调用动态库</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">api</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">ctypes.CDLL(</span><span style="color: #ed9d13">&#39;libfoo.so&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">DLFCN.RTLD_LAZY)</span>
<span style="color: #d0d0d0">api.foo.argtypes</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[ctypes.c_char_p,</span> <span style="color: #d0d0d0">ctypes.c_int]</span>
<span style="color: #d0d0d0">api.foo.restype</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">ctypes.c_int</span>
<span style="color: #d0d0d0">res</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">api.foo(msg,</span> <span style="color: #24909d">len</span><span style="color: #d0d0d0">(msg)</span>
</pre></div>


<h4 id="_8">未分类</h4>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%"><span style="color: #999999; font-style: italic">#美化显示</span>
<span style="color: #d0d0d0">pp</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">pprint.PrettyPrinter(indent=</span><span style="color: #3677a9">4</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">pp.pprint(stuff)</span>
</pre></div>
</body>
</html>

